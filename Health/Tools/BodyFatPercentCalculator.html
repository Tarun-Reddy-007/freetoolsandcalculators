<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FreeOnlineCalculators</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8237022176069616" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="BodyFatPercentCalculator.css">
</head>
<body>
  <div class="layout-shell">
  <header class="top-banner"></header>
  <nav class="navbar">
    <div class="nav-links"><a href="../../index.html">FreeToolsandCalculators.com</a></div>
    <div class="nav-links" id="navLinks">
      <a href="../../index.html">Home</a>
      <a href="../Health.html">Health</a>
      <a href="../../Fitness/Fitness.html">Fitness</a>
      <a href="../../Sports/Sports.html">Sports</a>
      <a href="../../Clothing/Clothing.html">Clothing</a>
      <a href="../../Finance/Finance.html">Finance</a>
      <a href="../../Utilities/Utilities.html">Utilities</a>
      <a href="../../Education/Education.html">Education</a>
      <a href="../../Media/Media.html">Media</a>
    </div>
    <div class="hamburger" onclick="toggleMenu()">&#9776;</div>
  </nav>
  <div class="content-row">
    <aside class="left-banner"></aside>
    <section class="scroll-panel">
      <div class="bf-tool-section">
      <div class="bf-card">
        <div class="bf-title-row">
          <h1 class="bf-title">Body Fat % Calculator</h1>
          <button type="button" class="bf-info-trigger" aria-describedby="bfInfoPanel" title="About" tabindex="0">i</button>
          <div class="bf-info-flyout" id="bfInfoPanel" role="tooltip" aria-hidden="true">
            <h2>How This Works</h2>
            <p>This tool estimates body fat percentage using circumference-based formulas (U.S. Navy method) and optionally BMI approximation. Lean Body Mass (LBM) is also computed.</p>
            <p class="bf-sub">U.S. Navy (metric form)</p>
            <p><strong>Male:</strong> 495 / (1.0324 - 0.19077 * log10(waist - neck) + 0.15456 * log10(height)) - 450</p>
            <p><strong>Female:</strong> 495 / (1.29579 - 0.35004 * log10(waist + hip - neck) + 0.22100 * log10(height)) - 450</p>
            <p class="bf-disclaimer">Estimates only; hydration, measurement error & population assumptions affect accuracy.</p>
          </div>
        </div>
        <div class="bf-interaction-row">
          <form id="bfForm" class="bf-form">
            <div class="input-group">
              <label for="sex">Sex</label>
              <div class="input-row">
                <select id="sex" name="sex" required>
                  <option value="male">Male</option>
                  <option value="female">Female</option>
                </select>
              </div>
            </div>
            <div class="input-group">
              <label for="age">Age (yrs)</label>
              <div class="input-row">
                <input type="number" id="age" min="10" max="100" placeholder="Age" required>
              </div>
            </div>
            <div class="input-group">
              <label for="height">Height</label>
              <div class="input-row">
                <input type="number" id="height" min="120" max="230" placeholder="Height" required>
                <select id="heightUnit">
                  <option value="cm">cm</option>
                  <option value="ft">ft/in</option>
                </select>
              </div>
              <div class="input-row" id="heightInchesRow" style="display:none;">
                <input type="number" id="heightInches" min="0" max="11" placeholder="Inches">
              </div>
            </div>
            <div class="input-group">
              <label for="weight">Weight</label>
              <div class="input-row">
                <input type="number" id="weight" min="35" max="250" placeholder="Weight" required>
                <select id="weightUnit">
                  <option value="kg">kg</option>
                  <option value="lb">lb</option>
                </select>
              </div>
            </div>
            <div class="input-group">
              <label for="neck">Neck</label>
              <div class="input-row">
                <input type="number" id="neck" min="20" max="70" placeholder="cm" required>
              </div>
            </div>
            <div class="input-group">
              <label for="waist">Waist</label>
              <div class="input-row">
                <input type="number" id="waist" min="40" max="200" placeholder="cm" required>
              </div>
            </div>
            <div class="input-group" id="hipGroup" style="display:none;">
              <label for="hip">Hip (female)</label>
              <div class="input-row">
                <input type="number" id="hip" min="50" max="200" placeholder="cm">
              </div>
            </div>
            <div class="input-group">
              <label>Methods</label>
              <div class="method-options" id="methodOptions">
                <label><input type="checkbox" value="navy" checked> Navy</label>
                <label><input type="checkbox" value="bmi" checked> BMI Approx</label>
              </div>
            </div>
            <button type="submit" class="bf-btn">Estimate</button>
          </form>
          <div class="bf-result-container" id="bfResultContainer" style="display:none;">
            <div class="bf-result"><span class="bf-value" id="bfPrimaryValue">--</span><span class="bf-label" id="bfPrimaryLabel">Body Fat %</span></div>
            <div class="bf-progress-wrapper">
              <div class="bf-progress-bar"><div class="bf-progress" id="bfProgress"></div></div>
              <div class="bf-scale"><span>Lean</span><span>Higher</span></div>
            </div>
            <div class="bf-breakdown" id="bfBreakdown"></div>
            <div class="bf-extra" id="bfExtra"></div>
            <div class="bf-tips" id="bfTips"></div>
            <div class="bf-disclaimer-bottom">Circumference measurements should be snug but not compressing skin. Take 2-3 readings.</div>
          </div>
        </div>
      </div>
      </div>
    </section>
  </div>
  <footer class="bottom-banner"></footer>
  </div>

  <script>
    function toggleMenu(){ document.getElementById('navLinks').classList.toggle('active'); }

    const sexEl = document.getElementById('sex');
    const hipGroup = document.getElementById('hipGroup');
    const heightUnit = document.getElementById('heightUnit');
    const heightInput = document.getElementById('height');
    const heightInchesRow = document.getElementById('heightInchesRow');

    sexEl.addEventListener('change', ()=>{ hipGroup.style.display = sexEl.value==='female' ? 'block':'none'; });
    heightUnit.addEventListener('change', ()=>{ if(heightUnit.value==='ft'){ heightInchesRow.style.display='flex'; heightInput.placeholder='Feet'; } else { heightInchesRow.style.display='none'; heightInput.placeholder='Height'; } });

    function toCm(ft,inch){ return (ft*30.48)+(inch*2.54); }
    function toKg(lb){ return lb*0.45359237; }

    const bfForm = document.getElementById('bfForm');
    const bfResultContainer = document.getElementById('bfResultContainer');
    const bfPrimaryValue = document.getElementById('bfPrimaryValue');
    const bfPrimaryLabel = document.getElementById('bfPrimaryLabel');
    const bfProgress = document.getElementById('bfProgress');
    const bfBreakdown = document.getElementById('bfBreakdown');
    const bfExtra = document.getElementById('bfExtra');
    const bfTips = document.getElementById('bfTips');

    function median(vals){ const s=[...vals].sort((a,b)=>a-b); const n=s.length; return n? (n%2? s[(n-1)/2] : (s[n/2-1]+s[n/2])/2) : 0; }

    function navy(sex, heightCm, neckCm, waistCm, hipCm){
      // Using cm; convert to log10 of (circumference difference)
      // Ensure positive arguments; if invalid returns NaN
      if(sex==='male'){
        const a = waistCm - neckCm; if(a<=0) return NaN;
        return 495/(1.0324 - 0.19077*Math.log10(a) + 0.15456*Math.log10(heightCm)) - 450;
      } else {
        const a = waistCm + hipCm - neckCm; if(a<=0) return NaN;
        return 495/(1.29579 - 0.35004*Math.log10(a) + 0.22100*Math.log10(heightCm)) - 450;
      }
    }

    function bmiApprox(weightKg, heightCm){
      const bmi = weightKg / ((heightCm/100)**2); // Deurenberg 1991 approximate BF% formula
      const age = parseInt(document.getElementById('age').value,10) || 0;
      const sex = sexEl.value==='male'?1:0; // male=1 female=0 in this variant
      // BF% = 1.20 * BMI + 0.23*Age - 10.8*sex - 5.4
      return 1.20*bmi + 0.23*age - 10.8*sex - 5.4;
    }

    function category(sex, bf){
      // Simple ACSM-style brackets
      const r = sex==='male' ? [
        {max:5, label:'Essential'}, {max:13,label:'Athlete'}, {max:17,label:'Fit'}, {max:24,label:'Average'}, {max:100,label:'Higher'}
      ] : [
        {max:13,label:'Essential'}, {max:20,label:'Athlete'}, {max:24,label:'Fit'}, {max:31,label:'Average'}, {max:100,label:'Higher'}
      ];
      return r.find(x=>bf <= x.max)?.label || 'Unknown';
    }

    bfForm.addEventListener('submit', e => {
      e.preventDefault();
      const sex = sexEl.value;
      let heightCm; if(heightUnit.value==='cm'){ heightCm=parseFloat(heightInput.value); } else { const ft=parseFloat(heightInput.value); const inch=parseFloat(document.getElementById('heightInches').value)||0; heightCm=toCm(ft, inch); }
      let weightKg = parseFloat(document.getElementById('weight').value); if(document.getElementById('weightUnit').value==='lb') weightKg = toKg(weightKg);
      const neck = parseFloat(document.getElementById('neck').value); const waist = parseFloat(document.getElementById('waist').value); const hip = parseFloat(document.getElementById('hip').value)||0;
      if(!heightCm || !weightKg || !neck || !waist || heightCm<120){ bfResultContainer.style.display='none'; bfResultContainer.classList.remove('show'); return; }

      const methodsSelected = [...document.querySelectorAll('#methodOptions input:checked')].map(c=>c.value);
      if(methodsSelected.length===0){ bfBreakdown.innerHTML='<div class="row">Select at least one method.</div>'; bfResultContainer.style.display='flex'; return; }

      const calculations = [];
      if(methodsSelected.includes('navy')){ const nv = navy(sex,heightCm,neck,waist,hip); if(!isNaN(nv)) calculations.push({key:'Navy', value:nv}); }
      if(methodsSelected.includes('bmi')){ const bp = bmiApprox(weightKg,heightCm); if(!isNaN(bp)) calculations.push({key:'BMI', value:bp}); }

      if(calculations.length===0){ bfBreakdown.innerHTML='<div class="row">Insufficient data for selected methods.</div>'; bfResultContainer.style.display='flex'; return; }

      const values = calculations.map(c=>c.value);
      const med = median(values);
      bfPrimaryValue.textContent = med.toFixed(1)+'%';
      bfPrimaryLabel.textContent = 'Median Body Fat';

      bfBreakdown.innerHTML = calculations.map(c=>`<div class="row"><span class="method">${c.key}</span><span>${c.value.toFixed(1)}%</span></div>`).join('');

      const lbm = weightKg * (1 - med/100);
      const cat = category(sex, med);
      bfExtra.innerHTML = `<div class="detail"><strong>Lean Body Mass:</strong> ${lbm.toFixed(1)} kg</div><div class="detail"><strong>Category:</strong> ${cat}</div>`;

      // Progress bar mapping 5% - 35% typical range
      const min=5, max=35; const clamp=Math.min(max, Math.max(min, med)); const pct=((clamp-min)/(max-min))*100; bfProgress.style.width=pct+'%'; bfProgress.style.background = med<12? '#2196f3' : med<20? '#4caf50' : med<28? '#ff9800' : '#e53935';

      let tip;
      if(cat==='Athlete' || cat==='Essential') tip='Very lean range. Ensure adequate energy & micronutrient intake.';
      else if(cat==='Fit') tip='Healthy athletic balance. Maintain with resistance training & recovery.';
      else if(cat==='Average') tip='Within general population norms. Small changes in nutrition & activity can shift composition.';
      else tip='Higher range. Gradual habit-based approach (sleep, protein, movement) supports recomposition.';
      bfTips.textContent = tip;

      bfResultContainer.style.display='flex';
      setTimeout(()=>{ bfResultContainer.classList.add('show'); bfResultContainer.scrollIntoView({behavior:'smooth', block:'center'}); }, 40);
    });
  </script>
</body>
</html>
